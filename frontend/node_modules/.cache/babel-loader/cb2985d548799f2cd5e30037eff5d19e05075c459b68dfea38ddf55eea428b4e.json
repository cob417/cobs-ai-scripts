{"ast":null,"code":"var _s = $RefreshSig$();\n/**\n * Custom hook for managing jobs\n */\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { getJobs, createJob, updateJob, deleteJob, runJob } from '../services/api';\nimport { useErrorHandler } from './useErrorHandler';\nexport const useJobs = () => {\n  _s();\n  const [jobs, setJobs] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const handleError = useErrorHandler();\n  const isInitialLoadRef = useRef(true);\n  const loadJobs = useCallback(async () => {\n    try {\n      // Only set loading on initial load, not on manual refreshes\n      // This prevents the UI from unmounting/remounting and resetting scroll position\n      if (isInitialLoadRef.current) {\n        setLoading(true);\n      }\n      setError(null);\n      const data = await getJobs();\n      setJobs(data);\n    } catch (err) {\n      const errorMessage = handleError(err);\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n      isInitialLoadRef.current = false;\n    }\n  }, [handleError]);\n  useEffect(() => {\n    loadJobs();\n  }, [loadJobs]);\n  const create = useCallback(async jobData => {\n    try {\n      const newJob = await createJob(jobData);\n      setJobs(prev => [...prev, newJob]);\n      return newJob;\n    } catch (err) {\n      handleError(err);\n      throw err;\n    }\n  }, [handleError]);\n  const update = useCallback(async (id, jobData) => {\n    try {\n      const updatedJob = await updateJob(id, jobData);\n      setJobs(prev => prev.map(job => job.id === id ? updatedJob : job));\n      return updatedJob;\n    } catch (err) {\n      handleError(err);\n      throw err;\n    }\n  }, [handleError]);\n  const remove = useCallback(async id => {\n    try {\n      await deleteJob(id);\n      setJobs(prev => prev.filter(job => job.id !== id));\n    } catch (err) {\n      handleError(err);\n      throw err;\n    }\n  }, [handleError]);\n  const run = useCallback(async id => {\n    try {\n      await runJob(id);\n    } catch (err) {\n      handleError(err);\n      throw err;\n    }\n  }, [handleError]);\n  return {\n    jobs,\n    loading,\n    error,\n    loadJobs,\n    create,\n    update,\n    remove,\n    run\n  };\n};\n_s(useJobs, \"E5wkgIb+lYa0Xb6zIg2ONKCHGeM=\", false, function () {\n  return [useErrorHandler];\n});","map":{"version":3,"names":["useState","useEffect","useCallback","useRef","getJobs","createJob","updateJob","deleteJob","runJob","useErrorHandler","useJobs","_s","jobs","setJobs","loading","setLoading","error","setError","handleError","isInitialLoadRef","loadJobs","current","data","err","errorMessage","create","jobData","newJob","prev","update","id","updatedJob","map","job","remove","filter","run"],"sources":["/home/cob417/github/cob-ai-scripts/frontend/src/hooks/useJobs.ts"],"sourcesContent":["/**\n * Custom hook for managing jobs\n */\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { Job, JobCreate, JobUpdate, getJobs, createJob, updateJob, deleteJob, runJob } from '../services/api';\nimport { useErrorHandler } from './useErrorHandler';\n\nexport const useJobs = () => {\n  const [jobs, setJobs] = useState<Job[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const handleError = useErrorHandler();\n  const isInitialLoadRef = useRef(true);\n\n  const loadJobs = useCallback(async () => {\n    try {\n      // Only set loading on initial load, not on manual refreshes\n      // This prevents the UI from unmounting/remounting and resetting scroll position\n      if (isInitialLoadRef.current) {\n        setLoading(true);\n      }\n      setError(null);\n      const data = await getJobs();\n      setJobs(data);\n    } catch (err) {\n      const errorMessage = handleError(err);\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n      isInitialLoadRef.current = false;\n    }\n  }, [handleError]);\n\n  useEffect(() => {\n    loadJobs();\n  }, [loadJobs]);\n\n  const create = useCallback(async (jobData: JobCreate) => {\n    try {\n      const newJob = await createJob(jobData);\n      setJobs((prev) => [...prev, newJob]);\n      return newJob;\n    } catch (err) {\n      handleError(err);\n      throw err;\n    }\n  }, [handleError]);\n\n  const update = useCallback(async (id: number, jobData: JobUpdate) => {\n    try {\n      const updatedJob = await updateJob(id, jobData);\n      setJobs((prev) => prev.map((job) => (job.id === id ? updatedJob : job)));\n      return updatedJob;\n    } catch (err) {\n      handleError(err);\n      throw err;\n    }\n  }, [handleError]);\n\n  const remove = useCallback(async (id: number) => {\n    try {\n      await deleteJob(id);\n      setJobs((prev) => prev.filter((job) => job.id !== id));\n    } catch (err) {\n      handleError(err);\n      throw err;\n    }\n  }, [handleError]);\n\n  const run = useCallback(async (id: number) => {\n    try {\n      await runJob(id);\n    } catch (err) {\n      handleError(err);\n      throw err;\n    }\n  }, [handleError]);\n\n  return {\n    jobs,\n    loading,\n    error,\n    loadJobs,\n    create,\n    update,\n    remove,\n    run,\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}