{"ast":null,"code":"/**\n * Cron expression input with live preview\n */import React,{useState,useEffect,useCallback,useMemo}from'react';import{parseCron}from'../services/api';import{validateCronExpression}from'../utils/validation';import{LoadingSpinner}from'./LoadingSpinner';import{ErrorMessage}from'./ErrorMessage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const COMMON_PRESETS=[{label:'Every minute',value:'* * * * *'},{label:'Every hour',value:'0 * * * *'},{label:'Daily at 9 AM',value:'0 9 * * *'},{label:'Daily at midnight',value:'0 0 * * *'},{label:'Every Monday at 9 AM',value:'0 9 * * 1'},{label:'Every weekday at 9 AM',value:'0 9 * * 1-5'},{label:'Every Sunday at midnight',value:'0 0 * * 0'}];export const CronInput=_ref=>{let{value,onChange,error}=_ref;const[description,setDescription]=useState('');const[nextRuns,setNextRuns]=useState([]);const[loading,setLoading]=useState(false);const[parseError,setParseError]=useState('');// Debounce cron parsing\nuseEffect(()=>{const validation=validateCronExpression(value);if(!validation.valid){setParseError(validation.error||'');setDescription('');setNextRuns([]);return;}const timeoutId=setTimeout(()=>{setLoading(true);setParseError('');parseCron(value).then(result=>{setDescription(result.description);setNextRuns(result.next_runs);}).catch(err=>{const errorMessage=err instanceof Error?err.message:'Invalid cron expression';setParseError(errorMessage);setDescription('');setNextRuns([]);}).finally(()=>{setLoading(false);});},500);// 500ms debounce\nreturn()=>clearTimeout(timeoutId);},[value]);const cronParts=useMemo(()=>{const parts=value.trim().split(/\\s+/);if(parts.length!==5){return['*','*','*','*','*'];}return parts;},[value]);const handlePresetClick=useCallback(presetValue=>{onChange(presetValue);},[onChange]);const handleFieldChange=useCallback((index,newValue)=>{const newParts=[...cronParts];newParts[index]=newValue;onChange(newParts.join(' '));},[cronParts,onChange]);return/*#__PURE__*/_jsxs(\"div\",{className:\"cron-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cron-input-fields\",children:[{label:'Minute',placeholder:'0',index:0},{label:'Hour',placeholder:'9',index:1},{label:'Day',placeholder:'*',index:2},{label:'Month',placeholder:'*',index:3},{label:'Weekday',placeholder:'*',index:4}].map(_ref2=>{let{label,placeholder,index}=_ref2;return/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:label}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:placeholder,value:cronParts[index]||'',onChange:e=>handleFieldChange(index,e.target.value)})]},label);})}),/*#__PURE__*/_jsx(\"div\",{className:\"cron-full-input\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Full Cron Expression\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"0 9 * * *\",value:value,onChange:e=>onChange(e.target.value),className:error||parseError?'error':''})]})}),(error||parseError)&&/*#__PURE__*/_jsx(ErrorMessage,{message:error||parseError}),loading&&/*#__PURE__*/_jsx(LoadingSpinner,{size:\"small\",message:\"Parsing cron expression...\"}),description&&!parseError&&/*#__PURE__*/_jsxs(\"div\",{className:\"cron-preview\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"description\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Schedule:\"}),\" \",description]}),nextRuns.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"next-runs\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Next runs:\"}),/*#__PURE__*/_jsx(\"ul\",{children:nextRuns.map((run,idx)=>/*#__PURE__*/_jsx(\"li\",{children:run},idx))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cron-presets\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Common Presets:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"preset-buttons\",children:COMMON_PRESETS.map(preset=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handlePresetClick(preset.value),className:\"preset-btn\",children:preset.label},preset.value))})]})]});};","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","parseCron","validateCronExpression","LoadingSpinner","ErrorMessage","jsx","_jsx","jsxs","_jsxs","COMMON_PRESETS","label","value","CronInput","_ref","onChange","error","description","setDescription","nextRuns","setNextRuns","loading","setLoading","parseError","setParseError","validation","valid","timeoutId","setTimeout","then","result","next_runs","catch","err","errorMessage","Error","message","finally","clearTimeout","cronParts","parts","trim","split","length","handlePresetClick","presetValue","handleFieldChange","index","newValue","newParts","join","className","children","placeholder","map","_ref2","type","e","target","size","run","idx","preset","onClick"],"sources":["/home/cob417/github/cob-ai-scripts/frontend/src/components/CronInput.tsx"],"sourcesContent":["/**\n * Cron expression input with live preview\n */\n\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { parseCron, CronParseResult } from '../services/api';\nimport { validateCronExpression } from '../utils/validation';\nimport { LoadingSpinner } from './LoadingSpinner';\nimport { ErrorMessage } from './ErrorMessage';\n\ninterface CronInputProps {\n  value: string;\n  onChange: (value: string) => void;\n  error?: string;\n}\n\nconst COMMON_PRESETS = [\n  { label: 'Every minute', value: '* * * * *' },\n  { label: 'Every hour', value: '0 * * * *' },\n  { label: 'Daily at 9 AM', value: '0 9 * * *' },\n  { label: 'Daily at midnight', value: '0 0 * * *' },\n  { label: 'Every Monday at 9 AM', value: '0 9 * * 1' },\n  { label: 'Every weekday at 9 AM', value: '0 9 * * 1-5' },\n  { label: 'Every Sunday at midnight', value: '0 0 * * 0' },\n];\n\nexport const CronInput: React.FC<CronInputProps> = ({ value, onChange, error }) => {\n  const [description, setDescription] = useState<string>('');\n  const [nextRuns, setNextRuns] = useState<string[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [parseError, setParseError] = useState<string>('');\n\n  // Debounce cron parsing\n  useEffect(() => {\n    const validation = validateCronExpression(value);\n    if (!validation.valid) {\n      setParseError(validation.error || '');\n      setDescription('');\n      setNextRuns([]);\n      return;\n    }\n\n    const timeoutId = setTimeout(() => {\n      setLoading(true);\n      setParseError('');\n      parseCron(value)\n        .then((result: CronParseResult) => {\n          setDescription(result.description);\n          setNextRuns(result.next_runs);\n        })\n        .catch((err) => {\n          const errorMessage = err instanceof Error ? err.message : 'Invalid cron expression';\n          setParseError(errorMessage);\n          setDescription('');\n          setNextRuns([]);\n        })\n        .finally(() => {\n          setLoading(false);\n        });\n    }, 500); // 500ms debounce\n\n    return () => clearTimeout(timeoutId);\n  }, [value]);\n\n  const cronParts = useMemo(() => {\n    const parts = value.trim().split(/\\s+/);\n    if (parts.length !== 5) {\n      return ['*', '*', '*', '*', '*'];\n    }\n    return parts;\n  }, [value]);\n\n  const handlePresetClick = useCallback((presetValue: string) => {\n    onChange(presetValue);\n  }, [onChange]);\n\n  const handleFieldChange = useCallback((index: number, newValue: string) => {\n    const newParts = [...cronParts];\n    newParts[index] = newValue;\n    onChange(newParts.join(' '));\n  }, [cronParts, onChange]);\n\n  return (\n    <div className=\"cron-input\">\n      <div className=\"cron-input-fields\">\n        {[\n          { label: 'Minute', placeholder: '0', index: 0 },\n          { label: 'Hour', placeholder: '9', index: 1 },\n          { label: 'Day', placeholder: '*', index: 2 },\n          { label: 'Month', placeholder: '*', index: 3 },\n          { label: 'Weekday', placeholder: '*', index: 4 },\n        ].map(({ label, placeholder, index }) => (\n          <label key={label}>\n            <span>{label}</span>\n            <input\n              type=\"text\"\n              placeholder={placeholder}\n              value={cronParts[index] || ''}\n              onChange={(e) => handleFieldChange(index, e.target.value)}\n            />\n          </label>\n        ))}\n      </div>\n\n      <div className=\"cron-full-input\">\n        <label>\n          <span>Full Cron Expression</span>\n          <input\n            type=\"text\"\n            placeholder=\"0 9 * * *\"\n            value={value}\n            onChange={(e) => onChange(e.target.value)}\n            className={error || parseError ? 'error' : ''}\n          />\n        </label>\n      </div>\n\n      {(error || parseError) && (\n        <ErrorMessage message={error || parseError} />\n      )}\n\n      {loading && <LoadingSpinner size=\"small\" message=\"Parsing cron expression...\" />}\n\n      {description && !parseError && (\n        <div className=\"cron-preview\">\n          <div className=\"description\">\n            <strong>Schedule:</strong> {description}\n          </div>\n          {nextRuns.length > 0 && (\n            <div className=\"next-runs\">\n              <strong>Next runs:</strong>\n              <ul>\n                {nextRuns.map((run, idx) => (\n                  <li key={idx}>{run}</li>\n                ))}\n              </ul>\n            </div>\n          )}\n        </div>\n      )}\n\n      <div className=\"cron-presets\">\n        <strong>Common Presets:</strong>\n        <div className=\"preset-buttons\">\n          {COMMON_PRESETS.map((preset) => (\n            <button\n              key={preset.value}\n              type=\"button\"\n              onClick={() => handlePresetClick(preset.value)}\n              className=\"preset-btn\"\n            >\n              {preset.label}\n            </button>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}