{"ast":null,"code":"var _s = $RefreshSig$();\n/**\n * Custom hook for managing job runs\n */\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { getJobRuns, getJobRun } from '../services/api';\nimport { useErrorHandler } from './useErrorHandler';\nexport const useJobRuns = (limit = 50) => {\n  _s();\n  const [runs, setRuns] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const handleError = useErrorHandler();\n  const isInitialLoadRef = useRef(true);\n  const loadRuns = useCallback(async () => {\n    try {\n      // Only set loading on initial load, not on polling refreshes\n      // This prevents the UI from unmounting/remounting and resetting scroll position\n      if (isInitialLoadRef.current) {\n        setLoading(true);\n      }\n      setError(null);\n      const data = await getJobRuns(limit);\n      setRuns(data);\n    } catch (err) {\n      const errorMessage = handleError(err);\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n      isInitialLoadRef.current = false;\n    }\n  }, [limit, handleError]);\n  useEffect(() => {\n    loadRuns();\n    const interval = setInterval(loadRuns, 10000); // Refresh every 10 seconds\n    return () => clearInterval(interval);\n  }, [loadRuns]);\n  const getRun = useCallback(async id => {\n    try {\n      return await getJobRun(id);\n    } catch (err) {\n      handleError(err);\n      throw err;\n    }\n  }, [handleError]);\n  return {\n    runs,\n    loading,\n    error,\n    loadRuns,\n    getRun\n  };\n};\n_s(useJobRuns, \"9WzbN79odzOIxImc8yqV1E0JViw=\", false, function () {\n  return [useErrorHandler];\n});","map":{"version":3,"names":["useState","useEffect","useCallback","useRef","getJobRuns","getJobRun","useErrorHandler","useJobRuns","limit","_s","runs","setRuns","loading","setLoading","error","setError","handleError","isInitialLoadRef","loadRuns","current","data","err","errorMessage","interval","setInterval","clearInterval","getRun","id"],"sources":["/home/cob417/github/cob-ai-scripts/frontend/src/hooks/useJobRuns.ts"],"sourcesContent":["/**\n * Custom hook for managing job runs\n */\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { JobRun, getJobRuns, getJobRun } from '../services/api';\nimport { useErrorHandler } from './useErrorHandler';\n\nexport const useJobRuns = (limit: number = 50) => {\n  const [runs, setRuns] = useState<JobRun[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const handleError = useErrorHandler();\n  const isInitialLoadRef = useRef(true);\n\n  const loadRuns = useCallback(async () => {\n    try {\n      // Only set loading on initial load, not on polling refreshes\n      // This prevents the UI from unmounting/remounting and resetting scroll position\n      if (isInitialLoadRef.current) {\n        setLoading(true);\n      }\n      setError(null);\n      const data = await getJobRuns(limit);\n      setRuns(data);\n    } catch (err) {\n      const errorMessage = handleError(err);\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n      isInitialLoadRef.current = false;\n    }\n  }, [limit, handleError]);\n\n  useEffect(() => {\n    loadRuns();\n    const interval = setInterval(loadRuns, 10000); // Refresh every 10 seconds\n    return () => clearInterval(interval);\n  }, [loadRuns]);\n\n  const getRun = useCallback(async (id: number): Promise<JobRun> => {\n    try {\n      return await getJobRun(id);\n    } catch (err) {\n      handleError(err);\n      throw err;\n    }\n  }, [handleError]);\n\n  return {\n    runs,\n    loading,\n    error,\n    loadRuns,\n    getRun,\n  };\n};\n"],"mappings":";AAAA;AACA;AACA;;AAEA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,WAAW,EAAEC,MAAM,QAAQ,OAAO;AAChE,SAAiBC,UAAU,EAAEC,SAAS,QAAQ,iBAAiB;AAC/D,SAASC,eAAe,QAAQ,mBAAmB;AAEnD,OAAO,MAAMC,UAAU,GAAGA,CAACC,KAAa,GAAG,EAAE,KAAK;EAAAC,EAAA;EAChD,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,CAAW,EAAE,CAAC;EAC9C,MAAM,CAACY,OAAO,EAAEC,UAAU,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACc,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAAgB,IAAI,CAAC;EACvD,MAAMgB,WAAW,GAAGV,eAAe,CAAC,CAAC;EACrC,MAAMW,gBAAgB,GAAGd,MAAM,CAAC,IAAI,CAAC;EAErC,MAAMe,QAAQ,GAAGhB,WAAW,CAAC,YAAY;IACvC,IAAI;MACF;MACA;MACA,IAAIe,gBAAgB,CAACE,OAAO,EAAE;QAC5BN,UAAU,CAAC,IAAI,CAAC;MAClB;MACAE,QAAQ,CAAC,IAAI,CAAC;MACd,MAAMK,IAAI,GAAG,MAAMhB,UAAU,CAACI,KAAK,CAAC;MACpCG,OAAO,CAACS,IAAI,CAAC;IACf,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZ,MAAMC,YAAY,GAAGN,WAAW,CAACK,GAAG,CAAC;MACrCN,QAAQ,CAACO,YAAY,CAAC;IACxB,CAAC,SAAS;MACRT,UAAU,CAAC,KAAK,CAAC;MACjBI,gBAAgB,CAACE,OAAO,GAAG,KAAK;IAClC;EACF,CAAC,EAAE,CAACX,KAAK,EAAEQ,WAAW,CAAC,CAAC;EAExBf,SAAS,CAAC,MAAM;IACdiB,QAAQ,CAAC,CAAC;IACV,MAAMK,QAAQ,GAAGC,WAAW,CAACN,QAAQ,EAAE,KAAK,CAAC,CAAC,CAAC;IAC/C,OAAO,MAAMO,aAAa,CAACF,QAAQ,CAAC;EACtC,CAAC,EAAE,CAACL,QAAQ,CAAC,CAAC;EAEd,MAAMQ,MAAM,GAAGxB,WAAW,CAAC,MAAOyB,EAAU,IAAsB;IAChE,IAAI;MACF,OAAO,MAAMtB,SAAS,CAACsB,EAAE,CAAC;IAC5B,CAAC,CAAC,OAAON,GAAG,EAAE;MACZL,WAAW,CAACK,GAAG,CAAC;MAChB,MAAMA,GAAG;IACX;EACF,CAAC,EAAE,CAACL,WAAW,CAAC,CAAC;EAEjB,OAAO;IACLN,IAAI;IACJE,OAAO;IACPE,KAAK;IACLI,QAAQ;IACRQ;EACF,CAAC;AACH,CAAC;AAACjB,EAAA,CAhDWF,UAAU;EAAA,QAIDD,eAAe;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}