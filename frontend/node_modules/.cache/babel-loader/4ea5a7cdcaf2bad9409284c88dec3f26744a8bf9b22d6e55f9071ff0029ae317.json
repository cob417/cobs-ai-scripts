{"ast":null,"code":"/**\n * API client for backend\n */import axios from'axios';const API_BASE_URL=process.env.REACT_APP_API_URL||'/api';const api=axios.create({baseURL:API_BASE_URL,headers:{'Content-Type':'application/json'},timeout:30000// 30 second timeout\n});// Request interceptor for logging\napi.interceptors.request.use(config=>{// Could add auth tokens here if needed\nreturn config;},error=>{return Promise.reject(error);});// Response interceptor for error handling\napi.interceptors.response.use(response=>response,error=>{// Handle common errors\nif(error.response){var _error$response$data,_error$response$data2;// Server responded with error status\nconst message=((_error$response$data=error.response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||((_error$response$data2=error.response.data)===null||_error$response$data2===void 0?void 0:_error$response$data2.message)||'An error occurred';return Promise.reject(new Error(message));}else if(error.request){// Request made but no response\nreturn Promise.reject(new Error('No response from server. Please check your connection.'));}else{// Error setting up request\nreturn Promise.reject(error);}});// Jobs API\nexport const getJobs=async()=>{const response=await api.get('/jobs');return response.data;};export const getJob=async id=>{const response=await api.get(\"/jobs/\".concat(id));return response.data;};export const createJob=async job=>{const response=await api.post('/jobs',job);return response.data;};export const updateJob=async(id,job)=>{const response=await api.put(\"/jobs/\".concat(id),job);return response.data;};export const deleteJob=async id=>{await api.delete(\"/jobs/\".concat(id));};export const runJob=async id=>{const response=await api.post(\"/jobs/\".concat(id,\"/run\"));return response.data;};// Cron API\nexport const parseCron=async cronExpression=>{const response=await api.post('/cron/parse',{cron_expression:cronExpression});return response.data;};// Job Runs API\nexport const getJobRuns=async function(){let limit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:50;const response=await api.get(\"/job-runs?limit=\".concat(limit));return response.data;};export const getJobRun=async id=>{const response=await api.get(\"/job-runs/\".concat(id));return response.data;};// Status API\nexport const getStatus=async()=>{const response=await api.get('/status');return response.data;};","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","timeout","interceptors","request","use","config","error","Promise","reject","response","_error$response$data","_error$response$data2","message","data","detail","Error","getJobs","get","getJob","id","concat","createJob","job","post","updateJob","put","deleteJob","delete","runJob","parseCron","cronExpression","cron_expression","getJobRuns","limit","arguments","length","undefined","getJobRun","getStatus"],"sources":["/home/cob417/github/cob-ai-scripts/frontend/src/services/api.ts"],"sourcesContent":["/**\n * API client for backend\n */\n\nimport axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '/api';\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  timeout: 30000, // 30 second timeout\n});\n\n// Request interceptor for logging\napi.interceptors.request.use(\n  (config) => {\n    // Could add auth tokens here if needed\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor for error handling\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    // Handle common errors\n    if (error.response) {\n      // Server responded with error status\n      const message = error.response.data?.detail || error.response.data?.message || 'An error occurred';\n      return Promise.reject(new Error(message));\n    } else if (error.request) {\n      // Request made but no response\n      return Promise.reject(new Error('No response from server. Please check your connection.'));\n    } else {\n      // Error setting up request\n      return Promise.reject(error);\n    }\n  }\n);\n\nexport interface Job {\n  id: number;\n  name: string;\n  prompt_filename: string;\n  prompt_content: string;\n  cron_expression: string;\n  enabled: boolean;\n  email_recipients?: string[];\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface JobCreate {\n  name: string;\n  prompt_content: string;\n  cron_expression: string;\n  enabled?: boolean;\n  email_recipients?: string[];\n}\n\nexport interface JobUpdate {\n  name?: string;\n  prompt_content?: string;\n  cron_expression?: string;\n  enabled?: boolean;\n  email_recipients?: string[];\n}\n\nexport interface JobRun {\n  id: number;\n  job_id: number;\n  job_name: string;\n  status: 'running' | 'success' | 'failed';\n  output_content?: string;  // Markdown\n  html_output_content?: string;  // HTML formatted\n  log_content?: string;\n  started_at: string;\n  completed_at?: string;\n  error_message?: string;\n}\n\nexport interface CronParseResult {\n  cron_expression: string;\n  description: string;\n  next_runs: string[];\n}\n\nexport interface Status {\n  scheduler_running: boolean;\n  active_jobs_count: number;\n  total_jobs_count: number;\n}\n\n// Jobs API\nexport const getJobs = async (): Promise<Job[]> => {\n  const response = await api.get<Job[]>('/jobs');\n  return response.data;\n};\n\nexport const getJob = async (id: number): Promise<Job> => {\n  const response = await api.get<Job>(`/jobs/${id}`);\n  return response.data;\n};\n\nexport const createJob = async (job: JobCreate): Promise<Job> => {\n  const response = await api.post<Job>('/jobs', job);\n  return response.data;\n};\n\nexport const updateJob = async (id: number, job: JobUpdate): Promise<Job> => {\n  const response = await api.put<Job>(`/jobs/${id}`, job);\n  return response.data;\n};\n\nexport const deleteJob = async (id: number): Promise<void> => {\n  await api.delete(`/jobs/${id}`);\n};\n\nexport const runJob = async (id: number): Promise<JobRun> => {\n  const response = await api.post<JobRun>(`/jobs/${id}/run`);\n  return response.data;\n};\n\n// Cron API\nexport const parseCron = async (cronExpression: string): Promise<CronParseResult> => {\n  const response = await api.post<CronParseResult>('/cron/parse', {\n    cron_expression: cronExpression,\n  });\n  return response.data;\n};\n\n// Job Runs API\nexport const getJobRuns = async (limit: number = 50): Promise<JobRun[]> => {\n  const response = await api.get<JobRun[]>(`/job-runs?limit=${limit}`);\n  return response.data;\n};\n\nexport const getJobRun = async (id: number): Promise<JobRun> => {\n  const response = await api.get<JobRun>(`/job-runs/${id}`);\n  return response.data;\n};\n\n// Status API\nexport const getStatus = async (): Promise<Status> => {\n  const response = await api.get<Status>('/status');\n  return response.data;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}