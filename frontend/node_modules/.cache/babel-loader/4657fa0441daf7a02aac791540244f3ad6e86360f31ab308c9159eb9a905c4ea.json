{"ast":null,"code":"/**\n * Main App component\n */import React,{useState,useCallback}from'react';import{JobList}from'./components/JobList';import{JobForm}from'./components/JobForm';import{JobRunsTable}from'./components/JobRunsTable';import{RunDetailModal}from'./components/RunDetailModal';import{ErrorBoundary}from'./components/ErrorBoundary';import{LoadingSpinner}from'./components/LoadingSpinner';import{useJobs}from'./hooks/useJobs';import{useJobRuns}from'./hooks/useJobRuns';import{useStatus}from'./hooks/useStatus';import'./App.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const{jobs,loading:jobsLoading,create,update,remove,run}=useJobs();const{runs,loading:runsLoading}=useJobRuns(50);const{status}=useStatus();const[showForm,setShowForm]=useState(false);const[editingJob,setEditingJob]=useState(null);const[selectedRun,setSelectedRun]=useState(null);const handleCreateJob=useCallback(async data=>{await create(data);setShowForm(false);},[create]);const handleUpdateJob=useCallback(async data=>{if(!editingJob)return;await update(editingJob.id,data);setEditingJob(null);setShowForm(false);},[editingJob,update]);const handleDeleteJob=useCallback(async job=>{if(window.confirm(\"Are you sure you want to delete \\\"\".concat(job.name,\"\\\"?\"))){await remove(job.id);}},[remove]);const handleToggleJob=useCallback(async job=>{await update(job.id,{enabled:!job.enabled});},[update]);const handleRunJob=useCallback(async job=>{try{await run(job.id);}catch(error){// Error is handled by the hook\n}},[run]);const handleEditJob=useCallback(job=>{setEditingJob(job);setShowForm(true);},[]);const handleNewJob=useCallback(()=>{setEditingJob(null);setShowForm(true);},[]);const handleCloseForm=useCallback(()=>{setShowForm(false);setEditingJob(null);},[]);const loading=jobsLoading||runsLoading;if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsx(LoadingSpinner,{size:\"large\",message:\"Loading application...\"})});}return/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"app-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-brand\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/static/logo.png\",alt:\"Cob's AI Scripts\",className:\"header-logo\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Cob's AI Scripts\"})]}),status&&/*#__PURE__*/_jsxs(\"div\",{className:\"status-info\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"scheduler-status \".concat(status.scheduler_running?'running':'stopped'),children:[\"Scheduler: \",status.scheduler_running?'Running':'Stopped']}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Active Jobs: \",status.active_jobs_count,\" / \",status.total_jobs_count]})]})]}),/*#__PURE__*/_jsx(\"main\",{className:\"app-main\",children:showForm?/*#__PURE__*/_jsx(JobForm,{job:editingJob||undefined,onSubmit:editingJob?handleUpdateJob:handleCreateJob,onCancel:handleCloseForm}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Scheduled Jobs\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNewJob,className:\"btn-primary\",children:\"+ Create New Job\"})]}),/*#__PURE__*/_jsx(JobList,{jobs:jobs,onEdit:handleEditJob,onDelete:handleDeleteJob,onToggle:handleToggleJob,onRun:handleRunJob}),/*#__PURE__*/_jsx(JobRunsTable,{runs:runs,onView:setSelectedRun})]})}),selectedRun!==null&&/*#__PURE__*/_jsx(RunDetailModal,{runId:selectedRun,onClose:()=>setSelectedRun(null)})]})});}export default App;","map":{"version":3,"names":["React","useState","useCallback","JobList","JobForm","JobRunsTable","RunDetailModal","ErrorBoundary","LoadingSpinner","useJobs","useJobRuns","useStatus","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","jobs","loading","jobsLoading","create","update","remove","run","runs","runsLoading","status","showForm","setShowForm","editingJob","setEditingJob","selectedRun","setSelectedRun","handleCreateJob","data","handleUpdateJob","id","handleDeleteJob","job","window","confirm","concat","name","handleToggleJob","enabled","handleRunJob","error","handleEditJob","handleNewJob","handleCloseForm","className","children","size","message","src","alt","scheduler_running","active_jobs_count","total_jobs_count","undefined","onSubmit","onCancel","onClick","onEdit","onDelete","onToggle","onRun","onView","runId","onClose"],"sources":["/home/cob417/github/cob-ai-scripts/frontend/src/App.tsx"],"sourcesContent":["/**\n * Main App component\n */\n\nimport React, { useState, useCallback } from 'react';\nimport { Job, JobCreate, JobUpdate } from './services/api';\nimport { JobList } from './components/JobList';\nimport { JobForm } from './components/JobForm';\nimport { JobRunsTable } from './components/JobRunsTable';\nimport { RunDetailModal } from './components/RunDetailModal';\nimport { ErrorBoundary } from './components/ErrorBoundary';\nimport { LoadingSpinner } from './components/LoadingSpinner';\nimport { useJobs } from './hooks/useJobs';\nimport { useJobRuns } from './hooks/useJobRuns';\nimport { useStatus } from './hooks/useStatus';\nimport './App.css';\n\nfunction App() {\n  const { jobs, loading: jobsLoading, create, update, remove, run } = useJobs();\n  const { runs, loading: runsLoading } = useJobRuns(50);\n  const { status } = useStatus();\n  \n  const [showForm, setShowForm] = useState(false);\n  const [editingJob, setEditingJob] = useState<Job | null>(null);\n  const [selectedRun, setSelectedRun] = useState<number | null>(null);\n\n  const handleCreateJob = useCallback(async (data: JobCreate | JobUpdate) => {\n    await create(data as JobCreate);\n    setShowForm(false);\n  }, [create]);\n\n  const handleUpdateJob = useCallback(async (data: JobCreate | JobUpdate) => {\n    if (!editingJob) return;\n    await update(editingJob.id, data as JobUpdate);\n    setEditingJob(null);\n    setShowForm(false);\n  }, [editingJob, update]);\n\n  const handleDeleteJob = useCallback(async (job: Job) => {\n    if (window.confirm(`Are you sure you want to delete \"${job.name}\"?`)) {\n      await remove(job.id);\n    }\n  }, [remove]);\n\n  const handleToggleJob = useCallback(async (job: Job) => {\n    await update(job.id, { enabled: !job.enabled });\n  }, [update]);\n\n  const handleRunJob = useCallback(async (job: Job) => {\n    try {\n      await run(job.id);\n    } catch (error) {\n      // Error is handled by the hook\n    }\n  }, [run]);\n\n  const handleEditJob = useCallback((job: Job) => {\n    setEditingJob(job);\n    setShowForm(true);\n  }, []);\n\n  const handleNewJob = useCallback(() => {\n    setEditingJob(null);\n    setShowForm(true);\n  }, []);\n\n  const handleCloseForm = useCallback(() => {\n    setShowForm(false);\n    setEditingJob(null);\n  }, []);\n\n  const loading = jobsLoading || runsLoading;\n\n  if (loading) {\n    return (\n      <div className=\"app\">\n        <LoadingSpinner size=\"large\" message=\"Loading application...\" />\n      </div>\n    );\n  }\n\n  return (\n    <ErrorBoundary>\n      <div className=\"app\">\n        <header className=\"app-header\">\n          <div className=\"header-brand\">\n            <img src=\"/static/logo.png\" alt=\"Cob's AI Scripts\" className=\"header-logo\" />\n            <h1>Cob's AI Scripts</h1>\n          </div>\n          {status && (\n            <div className=\"status-info\">\n              <span className={`scheduler-status ${status.scheduler_running ? 'running' : 'stopped'}`}>\n                Scheduler: {status.scheduler_running ? 'Running' : 'Stopped'}\n              </span>\n              <span>Active Jobs: {status.active_jobs_count} / {status.total_jobs_count}</span>\n            </div>\n          )}\n        </header>\n\n        <main className=\"app-main\">\n          {showForm ? (\n            <JobForm\n              job={editingJob || undefined}\n              onSubmit={editingJob ? handleUpdateJob : handleCreateJob}\n              onCancel={handleCloseForm}\n            />\n          ) : (\n            <>\n              <div className=\"section-header\">\n                <h2>Scheduled Jobs</h2>\n                <button onClick={handleNewJob} className=\"btn-primary\">\n                  + Create New Job\n                </button>\n              </div>\n\n              <JobList\n                jobs={jobs}\n                onEdit={handleEditJob}\n                onDelete={handleDeleteJob}\n                onToggle={handleToggleJob}\n                onRun={handleRunJob}\n              />\n\n              <JobRunsTable\n                runs={runs}\n                onView={setSelectedRun}\n              />\n            </>\n          )}\n        </main>\n\n        {selectedRun !== null && (\n          <RunDetailModal\n            runId={selectedRun}\n            onClose={() => setSelectedRun(null)}\n          />\n        )}\n      </div>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}