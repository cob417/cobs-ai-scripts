{"ast":null,"code":"/**\n * Custom hook for managing jobs\n */import{useState,useEffect,useCallback}from'react';import{getJobs,createJob,updateJob,deleteJob,runJob}from'../services/api';import{useErrorHandler}from'./useErrorHandler';export const useJobs=()=>{const[jobs,setJobs]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const handleError=useErrorHandler();const loadJobs=useCallback(async()=>{try{setLoading(true);setError(null);const data=await getJobs();setJobs(data);}catch(err){const errorMessage=handleError(err);setError(errorMessage);}finally{setLoading(false);}},[handleError]);useEffect(()=>{loadJobs();},[loadJobs]);const create=useCallback(async jobData=>{try{const newJob=await createJob(jobData);setJobs(prev=>[...prev,newJob]);return newJob;}catch(err){handleError(err);throw err;}},[handleError]);const update=useCallback(async(id,jobData)=>{try{const updatedJob=await updateJob(id,jobData);setJobs(prev=>prev.map(job=>job.id===id?updatedJob:job));return updatedJob;}catch(err){handleError(err);throw err;}},[handleError]);const remove=useCallback(async id=>{try{await deleteJob(id);setJobs(prev=>prev.filter(job=>job.id!==id));}catch(err){handleError(err);throw err;}},[handleError]);const run=useCallback(async id=>{try{await runJob(id);}catch(err){handleError(err);throw err;}},[handleError]);return{jobs,loading,error,loadJobs,create,update,remove,run};};","map":{"version":3,"names":["useState","useEffect","useCallback","getJobs","createJob","updateJob","deleteJob","runJob","useErrorHandler","useJobs","jobs","setJobs","loading","setLoading","error","setError","handleError","loadJobs","data","err","errorMessage","create","jobData","newJob","prev","update","id","updatedJob","map","job","remove","filter","run"],"sources":["/home/cob417/github/cob-ai-scripts/frontend/src/hooks/useJobs.ts"],"sourcesContent":["/**\n * Custom hook for managing jobs\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { Job, JobCreate, JobUpdate, getJobs, createJob, updateJob, deleteJob, runJob } from '../services/api';\nimport { useErrorHandler } from './useErrorHandler';\n\nexport const useJobs = () => {\n  const [jobs, setJobs] = useState<Job[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const handleError = useErrorHandler();\n\n  const loadJobs = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const data = await getJobs();\n      setJobs(data);\n    } catch (err) {\n      const errorMessage = handleError(err);\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  }, [handleError]);\n\n  useEffect(() => {\n    loadJobs();\n  }, [loadJobs]);\n\n  const create = useCallback(async (jobData: JobCreate) => {\n    try {\n      const newJob = await createJob(jobData);\n      setJobs((prev) => [...prev, newJob]);\n      return newJob;\n    } catch (err) {\n      handleError(err);\n      throw err;\n    }\n  }, [handleError]);\n\n  const update = useCallback(async (id: number, jobData: JobUpdate) => {\n    try {\n      const updatedJob = await updateJob(id, jobData);\n      setJobs((prev) => prev.map((job) => (job.id === id ? updatedJob : job)));\n      return updatedJob;\n    } catch (err) {\n      handleError(err);\n      throw err;\n    }\n  }, [handleError]);\n\n  const remove = useCallback(async (id: number) => {\n    try {\n      await deleteJob(id);\n      setJobs((prev) => prev.filter((job) => job.id !== id));\n    } catch (err) {\n      handleError(err);\n      throw err;\n    }\n  }, [handleError]);\n\n  const run = useCallback(async (id: number) => {\n    try {\n      await runJob(id);\n    } catch (err) {\n      handleError(err);\n      throw err;\n    }\n  }, [handleError]);\n\n  return {\n    jobs,\n    loading,\n    error,\n    loadJobs,\n    create,\n    update,\n    remove,\n    run,\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}