{"ast":null,"code":"/**\n * Custom hook for managing job runs\n */import{useState,useEffect,useCallback}from'react';import{getJobRuns,getJobRun}from'../services/api';import{useErrorHandler}from'./useErrorHandler';export const useJobRuns=function(){let limit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:50;const[runs,setRuns]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const handleError=useErrorHandler();const loadRuns=useCallback(async()=>{try{setLoading(true);setError(null);const data=await getJobRuns(limit);setRuns(data);}catch(err){const errorMessage=handleError(err);setError(errorMessage);}finally{setLoading(false);}},[limit,handleError]);useEffect(()=>{loadRuns();const interval=setInterval(loadRuns,10000);// Refresh every 10 seconds\nreturn()=>clearInterval(interval);},[loadRuns]);const getRun=useCallback(async id=>{try{return await getJobRun(id);}catch(err){handleError(err);throw err;}},[handleError]);return{runs,loading,error,loadRuns,getRun};};","map":{"version":3,"names":["useState","useEffect","useCallback","getJobRuns","getJobRun","useErrorHandler","useJobRuns","limit","arguments","length","undefined","runs","setRuns","loading","setLoading","error","setError","handleError","loadRuns","data","err","errorMessage","interval","setInterval","clearInterval","getRun","id"],"sources":["/home/cob417/github/cob-ai-scripts/frontend/src/hooks/useJobRuns.ts"],"sourcesContent":["/**\n * Custom hook for managing job runs\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { JobRun, getJobRuns, getJobRun } from '../services/api';\nimport { useErrorHandler } from './useErrorHandler';\n\nexport const useJobRuns = (limit: number = 50) => {\n  const [runs, setRuns] = useState<JobRun[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const handleError = useErrorHandler();\n\n  const loadRuns = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const data = await getJobRuns(limit);\n      setRuns(data);\n    } catch (err) {\n      const errorMessage = handleError(err);\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  }, [limit, handleError]);\n\n  useEffect(() => {\n    loadRuns();\n    const interval = setInterval(loadRuns, 10000); // Refresh every 10 seconds\n    return () => clearInterval(interval);\n  }, [loadRuns]);\n\n  const getRun = useCallback(async (id: number): Promise<JobRun> => {\n    try {\n      return await getJobRun(id);\n    } catch (err) {\n      handleError(err);\n      throw err;\n    }\n  }, [handleError]);\n\n  return {\n    runs,\n    loading,\n    error,\n    loadRuns,\n    getRun,\n  };\n};\n"],"mappings":"AAAA;AACA;AACA,GAEA,OAASA,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CACxD,OAAiBC,UAAU,CAAEC,SAAS,KAAQ,iBAAiB,CAC/D,OAASC,eAAe,KAAQ,mBAAmB,CAEnD,MAAO,MAAM,CAAAC,UAAU,CAAG,QAAAA,CAAA,CAAwB,IAAvB,CAAAC,KAAa,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,EAAE,CAC3C,KAAM,CAACG,IAAI,CAAEC,OAAO,CAAC,CAAGZ,QAAQ,CAAW,EAAE,CAAC,CAC9C,KAAM,CAACa,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACe,KAAK,CAAEC,QAAQ,CAAC,CAAGhB,QAAQ,CAAgB,IAAI,CAAC,CACvD,KAAM,CAAAiB,WAAW,CAAGZ,eAAe,CAAC,CAAC,CAErC,KAAM,CAAAa,QAAQ,CAAGhB,WAAW,CAAC,SAAY,CACvC,GAAI,CACFY,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CACd,KAAM,CAAAG,IAAI,CAAG,KAAM,CAAAhB,UAAU,CAACI,KAAK,CAAC,CACpCK,OAAO,CAACO,IAAI,CAAC,CACf,CAAE,MAAOC,GAAG,CAAE,CACZ,KAAM,CAAAC,YAAY,CAAGJ,WAAW,CAACG,GAAG,CAAC,CACrCJ,QAAQ,CAACK,YAAY,CAAC,CACxB,CAAC,OAAS,CACRP,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACP,KAAK,CAAEU,WAAW,CAAC,CAAC,CAExBhB,SAAS,CAAC,IAAM,CACdiB,QAAQ,CAAC,CAAC,CACV,KAAM,CAAAI,QAAQ,CAAGC,WAAW,CAACL,QAAQ,CAAE,KAAK,CAAC,CAAE;AAC/C,MAAO,IAAMM,aAAa,CAACF,QAAQ,CAAC,CACtC,CAAC,CAAE,CAACJ,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAO,MAAM,CAAGvB,WAAW,CAAC,KAAO,CAAAwB,EAAU,EAAsB,CAChE,GAAI,CACF,MAAO,MAAM,CAAAtB,SAAS,CAACsB,EAAE,CAAC,CAC5B,CAAE,MAAON,GAAG,CAAE,CACZH,WAAW,CAACG,GAAG,CAAC,CAChB,KAAM,CAAAA,GAAG,CACX,CACF,CAAC,CAAE,CAACH,WAAW,CAAC,CAAC,CAEjB,MAAO,CACLN,IAAI,CACJE,OAAO,CACPE,KAAK,CACLG,QAAQ,CACRO,MACF,CAAC,CACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}