{"ast":null,"code":"/**\n * API client for backend\n */\n\nimport axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '/api';\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  timeout: 30000 // 30 second timeout\n});\n\n// Request interceptor for logging\napi.interceptors.request.use(config => {\n  // Could add auth tokens here if needed\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Response interceptor for error handling\napi.interceptors.response.use(response => response, error => {\n  // Handle common errors\n  if (error.response) {\n    var _error$response$data, _error$response$data2;\n    // Server responded with error status\n    const message = ((_error$response$data = error.response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.detail) || ((_error$response$data2 = error.response.data) === null || _error$response$data2 === void 0 ? void 0 : _error$response$data2.message) || 'An error occurred';\n    return Promise.reject(new Error(message));\n  } else if (error.request) {\n    // Request made but no response\n    return Promise.reject(new Error('No response from server. Please check your connection.'));\n  } else {\n    // Error setting up request\n    return Promise.reject(error);\n  }\n});\n// Jobs API\nexport const getJobs = async () => {\n  const response = await api.get('/jobs');\n  return response.data;\n};\nexport const getJob = async id => {\n  const response = await api.get(`/jobs/${id}`);\n  return response.data;\n};\nexport const createJob = async job => {\n  const response = await api.post('/jobs', job);\n  return response.data;\n};\nexport const updateJob = async (id, job) => {\n  const response = await api.put(`/jobs/${id}`, job);\n  return response.data;\n};\nexport const deleteJob = async id => {\n  await api.delete(`/jobs/${id}`);\n};\nexport const runJob = async id => {\n  const response = await api.post(`/jobs/${id}/run`);\n  return response.data;\n};\n\n// Cron API\nexport const parseCron = async cronExpression => {\n  const response = await api.post('/cron/parse', {\n    cron_expression: cronExpression\n  });\n  return response.data;\n};\n\n// Job Runs API\nexport const getJobRuns = async (limit = 50) => {\n  const response = await api.get(`/job-runs?limit=${limit}`);\n  return response.data;\n};\nexport const getJobRun = async id => {\n  const response = await api.get(`/job-runs/${id}`);\n  return response.data;\n};\n\n// Status API\nexport const getStatus = async () => {\n  const response = await api.get('/status');\n  return response.data;\n};","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","timeout","interceptors","request","use","config","error","Promise","reject","response","_error$response$data","_error$response$data2","message","data","detail","Error","getJobs","get","getJob","id","createJob","job","post","updateJob","put","deleteJob","delete","runJob","parseCron","cronExpression","cron_expression","getJobRuns","limit","getJobRun","getStatus"],"sources":["/home/cob417/github/cob-ai-scripts/frontend/src/services/api.ts"],"sourcesContent":["/**\n * API client for backend\n */\n\nimport axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '/api';\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  timeout: 30000, // 30 second timeout\n});\n\n// Request interceptor for logging\napi.interceptors.request.use(\n  (config) => {\n    // Could add auth tokens here if needed\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor for error handling\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    // Handle common errors\n    if (error.response) {\n      // Server responded with error status\n      const message = error.response.data?.detail || error.response.data?.message || 'An error occurred';\n      return Promise.reject(new Error(message));\n    } else if (error.request) {\n      // Request made but no response\n      return Promise.reject(new Error('No response from server. Please check your connection.'));\n    } else {\n      // Error setting up request\n      return Promise.reject(error);\n    }\n  }\n);\n\nexport interface Job {\n  id: number;\n  name: string;\n  prompt_filename: string;\n  prompt_content: string;\n  cron_expression: string;\n  enabled: boolean;\n  email_recipients?: string[];\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface JobCreate {\n  name: string;\n  prompt_content: string;\n  cron_expression: string;\n  enabled?: boolean;\n  email_recipients?: string[];\n}\n\nexport interface JobUpdate {\n  name?: string;\n  prompt_content?: string;\n  cron_expression?: string;\n  enabled?: boolean;\n  email_recipients?: string[];\n}\n\nexport interface JobRun {\n  id: number;\n  job_id: number;\n  job_name: string;\n  status: 'running' | 'success' | 'failed';\n  output_content?: string;  // Markdown\n  html_output_content?: string;  // HTML formatted\n  log_content?: string;\n  started_at: string;\n  completed_at?: string;\n  error_message?: string;\n}\n\nexport interface CronParseResult {\n  cron_expression: string;\n  description: string;\n  next_runs: string[];\n}\n\nexport interface Status {\n  scheduler_running: boolean;\n  active_jobs_count: number;\n  total_jobs_count: number;\n}\n\n// Jobs API\nexport const getJobs = async (): Promise<Job[]> => {\n  const response = await api.get<Job[]>('/jobs');\n  return response.data;\n};\n\nexport const getJob = async (id: number): Promise<Job> => {\n  const response = await api.get<Job>(`/jobs/${id}`);\n  return response.data;\n};\n\nexport const createJob = async (job: JobCreate): Promise<Job> => {\n  const response = await api.post<Job>('/jobs', job);\n  return response.data;\n};\n\nexport const updateJob = async (id: number, job: JobUpdate): Promise<Job> => {\n  const response = await api.put<Job>(`/jobs/${id}`, job);\n  return response.data;\n};\n\nexport const deleteJob = async (id: number): Promise<void> => {\n  await api.delete(`/jobs/${id}`);\n};\n\nexport const runJob = async (id: number): Promise<JobRun> => {\n  const response = await api.post<JobRun>(`/jobs/${id}/run`);\n  return response.data;\n};\n\n// Cron API\nexport const parseCron = async (cronExpression: string): Promise<CronParseResult> => {\n  const response = await api.post<CronParseResult>('/cron/parse', {\n    cron_expression: cronExpression,\n  });\n  return response.data;\n};\n\n// Job Runs API\nexport const getJobRuns = async (limit: number = 50): Promise<JobRun[]> => {\n  const response = await api.get<JobRun[]>(`/job-runs?limit=${limit}`);\n  return response.data;\n};\n\nexport const getJobRun = async (id: number): Promise<JobRun> => {\n  const response = await api.get<JobRun>(`/job-runs/${id}`);\n  return response.data;\n};\n\n// Status API\nexport const getStatus = async (): Promise<Status> => {\n  const response = await api.get<Status>('/status');\n  return response.data;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}